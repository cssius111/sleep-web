/* Base palette and typography */
:root {
  --bg: #0c0a10;
  --text: #f4e9ff;
  --muted: #b7a9c8;
  --accent: #ff4d6d;
  --accent-2: #ffa8b8;
  --panel: #120f1bd9;
  --stroke: #261f33;
  --shadow: 0 30px 90px rgba(0, 0, 0, 0.45);
  --radius: 18px;
  --sky-phase: 0; /* 0=day, 1=night */
}

html, body { height: 100%; }

body {
  margin: 0;
  font-family: "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: radial-gradient(circle at 20% 20%, #1a1222, var(--bg));
  color: var(--text);
  overflow-x: hidden;
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  transition: background 0.8s ease, color 0.5s ease;
  position: relative;
}
body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image:
    linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
  background-size: 120px 120px;
  mix-blend-mode: screen;
  opacity: 0.25;
  z-index: 0;
}
body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='0.14'/%3E%3C/svg%3E");
  mix-blend-mode: soft-light;
  opacity: 0.22;
  z-index: 0;
}

/* Scroll progress */
.scroll-progress { position: fixed; top: 0; left: 0; right: 0; height: 4px; background: color-mix(in srgb, var(--panel) 40%, transparent); z-index: 40; }
.scroll-progress span { display: block; height: 100%; width: 0; background: linear-gradient(90deg, var(--accent), var(--accent-2), var(--accent)); transition: width 0.1s linear; background-size: 200% 100%; animation: flow 2.4s linear infinite; }

body.night {
  --bg: #07060c;
  --text: #f8f0ff;
  --muted: #c6b8d6;
  --accent: #ff5c7f;
  --accent-2: #ffb5c5;
  --panel: #0d0b15f0;
  --stroke: #141026;
  background: radial-gradient(circle at 30% 30%, #110b1b, #05030a 60%, #020207 100%);
}

*,
*::before,
*::after { box-sizing: border-box; }

a { color: inherit; text-decoration: none; }
img { max-width: 100%; display: block; }

h1, h2, h3 { margin: 0 0 12px; line-height: 1.05; }
p { margin: 0 0 12px; color: var(--muted); line-height: 1.7; }
.eyebrow { text-transform: uppercase; letter-spacing: 0.08em; font-size: 12px; color: var(--muted); margin: 0 0 12px; }

/* Sticky translucent top bar */
.topbar {
  position: fixed;
  inset: 0 0 auto 0;
  height: 64px;
  padding: 12px 6vw;
  display: flex;
  align-items: center;
  justify-content: space-between;
  z-index: 30;
  backdrop-filter: blur(18px);
  background: color-mix(in srgb, var(--panel) 92%, transparent);
  border-bottom: 1px solid var(--stroke);
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.35);
}

.brand { display: flex; align-items: center; gap: 10px; font-weight: 700; letter-spacing: 0.6px; }
.dot { width: 12px; height: 12px; border-radius: 50%; background: linear-gradient(135deg, var(--accent), #ff87a2); box-shadow: 0 0 18px color-mix(in srgb, var(--accent) 70%, transparent); }
.brand-text { font-size: 15px; }
.top-audio-controls { display: flex; gap: 8px; align-items: center; }
.toggle-button.small { padding: 6px 10px; }

.toggle-button {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 9px 12px;
  border-radius: 14px;
  border: 1px solid var(--stroke);
  background: color-mix(in srgb, var(--panel) 90%, transparent);
  color: var(--text);
  cursor: pointer;
  font-weight: 600;
  transition: border-color 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
}
.toggle-button:hover { border-color: color-mix(in srgb, var(--accent) 60%, var(--stroke)); }
.toggle-button.is-on { box-shadow: 0 12px 30px rgba(0,0,0,0.12); }
.toggle-pill { width: 46px; height: 24px; border-radius: 999px; background: var(--stroke); position: relative; transition: background 0.2s ease; }
.toggle-thumb { width: 18px; height: 18px; border-radius: 50%; background: var(--accent); position: absolute; top: 3px; left: 3px; transition: transform 0.2s ease, background 0.2s ease; }
.toggle-button.is-on .toggle-pill { background: color-mix(in srgb, var(--accent) 25%, var(--stroke)); }
.toggle-button.is-on .toggle-thumb { transform: translateX(22px); }

.click-hint {
  position: fixed;
  bottom: 18px;
  left: 18px;
  z-index: 40;
  padding: 10px 14px;
  background: color-mix(in srgb, var(--panel) 90%, transparent);
  border: 1px solid var(--stroke);
  border-radius: 12px;
  color: var(--text);
  font-weight: 600;
  box-shadow: 0 12px 30px rgba(0,0,0,0.28);
  animation: pulse 1.6s ease-in-out infinite;
  transition: opacity 0.3s ease, transform 0.3s ease;
}
.click-hint.hide {
  opacity: 0;
  transform: translateY(10px);
  pointer-events: none;
}

/* Hero */
.hero {
  position: relative;
  min-height: 100vh;
  overflow: hidden;
  display: grid;
  align-items: center;
  justify-items: center;
  padding: 140px 6vw 120px;
  isolation: isolate;
  scroll-snap-align: start;
  scroll-snap-stop: always;
}
.hero::before {
  content: "";
  position: absolute;
  inset: 0;
  opacity: 0;
  pointer-events: none;
  z-index: 0;
}
body.night .hero::before {
  opacity: 1;
  background: linear-gradient(-45deg, #0c1b33, #0f2744, #122b46, #0b1a30);
  background-size: 320% 320%;
  animation: aurora 26s ease infinite;
  mix-blend-mode: screen;
}
.mountain-divider { width: 100vw; margin-left: calc(50% - 50vw); height: 160px; overflow: hidden; }
.mountain-divider svg { width: 100%; height: 100%; display: block; }
.mountain-divider path { fill: color-mix(in srgb, var(--accent) 25%, var(--panel)); }

.sky.grad {
  position: absolute;
  inset: 0;
  border-radius: 32px;
  background: linear-gradient(
    180deg,
    color-mix(in srgb, #e9f2ff calc((1 - var(--sky-phase)) * 100%), #050816 calc(var(--sky-phase) * 100%)) 0%,
    color-mix(in srgb, #d4e4ff calc((1 - var(--sky-phase)) * 100%), #02060f calc(var(--sky-phase) * 100%)) 50%,
    color-mix(in srgb, #c7daff calc((1 - var(--sky-phase)) * 100%), #000000 calc(var(--sky-phase) * 100%)) 100%
  );
  transition: background 0.25s linear;
}

.stars { position: absolute; inset: 0; pointer-events: none; opacity: var(--sky-phase); transition: opacity 1.2s ease; }
.stars span { position: absolute; width: 3px; height: 3px; background: #dfe7ff; border-radius: 50%; opacity: 0.5; animation: twinkle 4s ease-in-out infinite; }
.stars span:nth-child(1) { top: 20%; left: 18%; animation-delay: 0.2s; }
.stars span:nth-child(2) { top: 28%; left: 42%; animation-delay: 1s; }
.stars span:nth-child(3) { top: 16%; left: 62%; animation-delay: 1.6s; }
.stars span:nth-child(4) { top: 12%; left: 80%; animation-delay: 0.6s; }
.stars span:nth-child(5) { top: 38%; left: 74%; animation-delay: 1.2s; }
.stars span:nth-child(6) { top: 24%; left: 54%; animation-delay: 0.8s; }
.stars span:nth-child(7) { top: 10%; left: 30%; animation-delay: 1.4s; }
.stars span:nth-child(8) { top: 14%; left: 24%; animation-delay: 0.4s; }
.stars span:nth-child(9) { top: 26%; left: 60%; animation-delay: 1.8s; }
.stars span:nth-child(10) { top: 18%; left: 48%; animation-delay: 2s; }

.orb {
  position: fixed;
  left: 0;
  top: 0;
  width: 110px;
  height: 110px;
  border-radius: 50%;
  pointer-events: none;
  background: radial-gradient(circle at 30% 30%, #fff7d6, #ffd36b);
  box-shadow: 0 0 40px rgba(255, 211, 107, 0.7);
  transform: translate(13vw, 19.6vh);
  transition: box-shadow 0.25s linear, background 0.25s linear;
}
.orb[data-phase="moon"] {
  background: radial-gradient(circle at 30% 30%, #eef3ff, #9fb4ff);
  box-shadow: 0 0 40px rgba(155, 180, 255, 0.9);
}

.hills { position: absolute; bottom: -140px; left: -8%; right: -8%; height: 340px; transition: background 0.8s ease; will-change: transform; pointer-events: none; overflow: hidden; transform: translateY(-90px); }
.hills .hill { position: absolute; border-radius: 45% 55% 40% 60%; filter: blur(0.4px); }
.hills .one { width: 36vw; height: 26vh; background: linear-gradient(180deg, #d8e2f7 0%, #c1cde9 70%, #a9b6d8 100%); left: 18vw; bottom: -6vh; transform: rotate(-2deg); }
.hills .two { width: 44vw; height: 30vh; background: linear-gradient(180deg, #b7c6e6 0%, #9fb0d8 70%, #7f93c4 100%); left: 42vw; bottom: -4vh; transform: rotate(3deg); }
.hills .three { width: 34vw; height: 24vh; background: linear-gradient(180deg, #9fb4ff 0%, #7a8fbf 70%, #5e6f98 100%); left: 68vw; bottom: -2vh; transform: rotate(-4deg); opacity: 0.65; }
body.night .hills .one { background: linear-gradient(180deg, #23162c 0%, #1a1025 70%, #110a1c 100%); }
body.night .hills .two { background: linear-gradient(180deg, #1e122b 0%, #140d20 70%, #0d0818 100%); }
body.night .hills .three { background: linear-gradient(180deg, #35152c 0%, #271021 70%, #1a0c19 100%); }

.hero-content { position: relative; z-index: 2; max-width: 80vw; color: var(--text); text-align: center; text-shadow: 0 14px 40px rgba(0,0,0,0.18); }
.hero h1 { font-size: clamp(60px, 12vw, 120px); letter-spacing: -1.2px; line-height: 0.95; max-width: 12ch; margin-left: auto; margin-right: auto; min-height: 1.1em; text-transform: uppercase; white-space: pre-wrap; }
.matrix { position: absolute; inset: 10% 0 auto 0; text-align: center; font-family: "SF Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: clamp(12px, 1.4vw, 18px); letter-spacing: 0.2em; color: color-mix(in srgb, var(--muted) 55%, transparent); opacity: 0.25; white-space: pre-wrap; padding: 0 12vw; z-index: 0; }
.matrix span { display: inline-block; transition: opacity 0.3s ease; }
.hero h1 span { display: inline-block; perspective: 400px; }
.flip { animation: flip 0.5s linear; }
.lede { font-size: 20px; max-width: 700px; margin-left: auto; margin-right: auto; }
.hero-actions { display: flex; gap: 12px; flex-wrap: wrap; margin: 20px 0; justify-content: center; }

.ghost-button {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 18px;
  border-radius: 999px;
  border: 1px solid var(--stroke);
  background: color-mix(in srgb, var(--panel) 92%, transparent);
  color: var(--text);
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
  position: relative;
  overflow: hidden;
}
.ghost-button::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: 0;
  height: 2px;
  width: 100%;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.25s ease;
}
.ghost-button:hover { transform: translateY(-1px); border-color: color-mix(in srgb, var(--accent) 60%, var(--stroke)); box-shadow: 0 12px 36px rgba(0,0,0,0.35); }
.ghost-button:hover::after { transform: scaleX(1); }
.text-link { color: var(--muted); font-weight: 600; }
.text-link { position: relative; display: inline-flex; align-items: center; gap: 6px; }
.text-link::after { content: ""; position: absolute; left: 0; bottom: -2px; height: 2px; width: 100%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transform: scaleX(0); transform-origin: left; transition: transform 0.25s ease; }
.text-link:hover::after { transform: scaleX(1); }
.thesis-tag { display: inline-block; padding: 10px 12px; border-radius: 14px; background: color-mix(in srgb, var(--accent) 10%, var(--panel)); border: 1px solid color-mix(in srgb, var(--accent) 20%, var(--stroke)); font-size: 13px; }

/* Sections */
.section { position: relative; min-height: 90vh; width: min(1200px, 92vw); margin: 0 auto; padding: 140px 0 120px; scroll-snap-align: start; scroll-snap-stop: always; }
.section.calculator { min-height: auto; padding-top: 90px; }
.section-head { margin-bottom: 20px; }
.section-lede { max-width: 760px; font-size: 18px; }
.section h2 { font-size: clamp(44px, 6.5vw, 76px); line-height: 1.05; }

/* Why */
.why-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 16px; }
.why-card { padding: 18px; border-radius: var(--radius); border: 1px solid var(--stroke); background: color-mix(in srgb, var(--panel) 95%, transparent); box-shadow: var(--shadow); }

/* Habits */
.section.habits { padding-top: 100px; }
.card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 18px; margin-top: 32px; }
.card { padding: 22px; border-radius: var(--radius); border: 1px solid var(--stroke); background: color-mix(in srgb, var(--panel) 95%, transparent); box-shadow: var(--shadow); backdrop-filter: blur(12px); }
.icon-frame { width: 66px; height: 66px; border-radius: 16px; background: color-mix(in srgb, var(--accent) 10%, var(--panel)); border: 1px solid color-mix(in srgb, var(--accent) 30%, var(--stroke)); display: grid; place-items: center; box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--accent) 8%, transparent); }
.icon { width: 46px; height: 46px; image-rendering: pixelated; }

/* Photo full-bleed */
.photo { position: relative; width: 100vw; margin-left: calc(50% - 50vw); min-height: 100vh; overflow: hidden; background: url("images/morning.jpg") center/cover no-repeat; box-shadow: var(--shadow); scroll-snap-align: start; scroll-snap-stop: always; }
.photo-overlay { position: absolute; inset: 0; background: linear-gradient(115deg, rgba(6,12,24,0.65) 0%, rgba(6,12,24,0.45) 50%, rgba(6,12,24,0.32) 100%); }
.photo-content { position: relative; z-index: 1; color: #fff; max-width: 70vw; padding: 18vh 10vw 12vh; text-shadow: 0 16px 40px rgba(0,0,0,0.4); text-align: left; }
.photo h2 { color: #fff; font-size: clamp(64px, 10vw, 110px); line-height: 1; }
.photo p { color: #dfe7ff; font-size: 20px; max-width: 36ch; }
.scroll-cue { position: absolute; bottom: 26px; left: 50%; transform: translateX(-50%); display: grid; place-items: center; gap: 8px; color: var(--muted); font-size: 12px; letter-spacing: 0.2em; text-transform: uppercase; }
.scroll-arrow { width: 14px; height: 24px; border: 1px solid color-mix(in srgb, var(--accent) 60%, var(--stroke)); border-radius: 999px; position: relative; overflow: hidden; }
.scroll-arrow::after { content: ""; position: absolute; top: 4px; left: 50%; width: 2px; height: 8px; background: var(--accent); transform: translateX(-50%); animation: drop 1.6s ease-in-out infinite; }
.scroll-text { letter-spacing: 0.28em; }
.photo::before,
.photo::after { content: ""; position: absolute; inset: 0; pointer-events: none; transition: clip-path 0.35s ease, opacity 0.35s ease; }
.photo::before { background: linear-gradient(90deg, rgba(10,14,25,0.65), rgba(10,14,25,0.15)); clip-path: polygon(0 0, 50% 0, 50% 100%, 0 100%); }
.photo::after { background: linear-gradient(90deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02)); clip-path: polygon(50% 0, 100% 0, 100% 100%, 50% 100%); opacity: 0.9; }
.photo:hover::before { clip-path: polygon(0 0, 70% 0, 70% 100%, 0 100%); }
.photo:hover::after { clip-path: polygon(30% 0, 100% 0, 100% 100%, 30% 100%); opacity: 1; }

/* Graph */
.chart-wrap { background: color-mix(in srgb, var(--panel) 95%, transparent); border: 1px solid var(--stroke); border-radius: 22px; padding: 18px; box-shadow: var(--shadow); backdrop-filter: blur(12px); }
#sleepChart { width: 100%; height: 320px; display: block; }
.chart-caption { margin-top: 10px; font-size: 13px; color: var(--muted); }

/* Metrics */
.metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 18px; align-items: start; }
.progress-stack { display: grid; gap: 12px; padding: 18px; border-radius: var(--radius); border: 1px solid var(--stroke); background: color-mix(in srgb, var(--panel) 92%, transparent); box-shadow: var(--shadow); }
.progress-row { display: grid; grid-template-columns: 1fr auto; gap: 8px; align-items: center; }
.progress-label { font-weight: 700; color: var(--text); }
.progress-bar { grid-column: 1 / -1; height: 12px; border-radius: 999px; background: color-mix(in srgb, var(--panel) 80%, var(--stroke)); overflow: hidden; }
.progress-bar span { display: block; height: 100%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); width: 0; transition: width 0.4s ease; }
.progress-meta { font-size: 13px; color: var(--muted); }
.bar-card { padding: 18px; border-radius: var(--radius); border: 1px solid var(--stroke); background: color-mix(in srgb, var(--panel) 94%, transparent); box-shadow: var(--shadow); }
#metricsChart { width: 100%; height: 260px; display: block; }

/* Calculator */
.calc-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 18px; align-items: start; }
.calc-form, .calc-result { padding: 18px; border-radius: var(--radius); border: 1px solid var(--stroke); background: color-mix(in srgb, var(--panel) 94%, transparent); box-shadow: var(--shadow); backdrop-filter: blur(10px); }
.calc-form { display: grid; gap: 12px; }
.calc-form label { display: flex; flex-direction: column; gap: 6px; font-weight: 600; color: var(--text); }
.calc-form input { padding: 10px 12px; border-radius: 12px; border: 1px solid var(--stroke); background: color-mix(in srgb, var(--panel) 85%, transparent); color: var(--text); font-size: 15px; }
.calc-form input:focus { outline: 2px solid color-mix(in srgb, var(--accent) 45%, var(--stroke)); border-color: transparent; }
.calc-form .hint { font-size: 12px; color: var(--muted); }
.calc-form button { justify-self: flex-start; }
.calc-result { display: grid; gap: 12px; }
.rating-line { display: flex; align-items: center; gap: 12px; }
.rating-pill { display: inline-flex; align-items: center; padding: 8px 14px; border-radius: 999px; border: 1px solid var(--stroke); background: color-mix(in srgb, var(--accent) 12%, var(--panel)); font-weight: 700; color: #fff; min-width: 110px; justify-content: center; }
.rating-pill.good { background: color-mix(in srgb, #6ad58f 25%, var(--panel)); color: #ffffff; }
.rating-pill.ok { background: color-mix(in srgb, #ffd27f 25%, var(--panel)); color: #ffffff; }
.rating-pill.poor { background: color-mix(in srgb, #ff9f9f 25%, var(--panel)); color: #ffffff; }
.rating-copy { color: var(--muted); font-weight: 600; }
.result-advice { padding: 12px; border-radius: 12px; border: 1px dashed var(--stroke); background: color-mix(in srgb, var(--panel) 85%, transparent); }
.viz { display: grid; gap: 12px; }
.viz-row { display: grid; gap: 6px; grid-template-columns: 1fr auto; align-items: center; }
.viz-label { font-weight: 600; color: var(--text); }
.viz-bar { grid-column: 1 / -1; height: 12px; background: color-mix(in srgb, var(--panel) 80%, var(--stroke)); border-radius: 999px; overflow: hidden; }
.viz-bar span { display: block; height: 100%; width: 0; background: linear-gradient(90deg, var(--accent), var(--accent-2)); border-radius: inherit; transition: width 0.3s ease; }
.viz-meta { font-size: 13px; color: var(--muted); }
.calc-footnote { margin-top: 12px; font-size: 13px; color: var(--muted); }
.error { color: #c43d3d; min-height: 18px; font-size: 13px; }

/* Advice bank */
.advice-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; }
.advice-card { padding: 18px; border-radius: var(--radius); border: 1px solid var(--stroke); background: color-mix(in srgb, var(--panel) 94%, transparent); box-shadow: var(--shadow); }
.advice-card h3 { font-size: 18px; line-height: 1.3; }
.advice-card p { margin: 0; }

/* Audio */
.audio { display: flex; flex-direction: column; gap: 18px; }
.audio-controls { display: inline-flex; align-items: center; gap: 14px; padding: 16px 18px; border-radius: 16px; border: 1px solid var(--stroke); background: color-mix(in srgb, var(--panel) 92%, transparent); box-shadow: var(--shadow); backdrop-filter: blur(10px); width: fit-content; }
.audio-status { font-weight: 600; color: var(--muted); }
.wave { display: inline-flex; gap: 4px; height: 22px; align-items: flex-end; }
.wave span { width: 4px; background: color-mix(in srgb, var(--accent) 70%, var(--accent-2)); border-radius: 3px; height: 6px; opacity: 0.5; transform-origin: bottom; }
.wave.playing span { animation: pulse 1.2s ease-in-out infinite; opacity: 1; }
.wave span:nth-child(2) { animation-delay: 0.1s; }
.wave span:nth-child(3) { animation-delay: 0.2s; }
.wave span:nth-child(4) { animation-delay: 0.3s; }

/* Science */
.science-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 14px; }
.science-card { padding: 22px; border-radius: var(--radius); border: 1px dashed var(--stroke); background: color-mix(in srgb, var(--panel) 92%, transparent); font-size: 18px; }
.science-card .source { display: inline-flex; padding: 4px 8px; border-radius: 12px; background: color-mix(in srgb, var(--accent) 10%, var(--panel)); border: 1px solid color-mix(in srgb, var(--accent) 30%, var(--stroke)); font-size: 12px; margin-bottom: 6px; }

/* Prompt */
.prompt-box { padding: 18px; border-radius: var(--radius); border: 1px dashed var(--stroke); background: color-mix(in srgb, var(--panel) 92%, transparent); box-shadow: var(--shadow); backdrop-filter: blur(10px); display: flex; flex-direction: column; gap: 12px; }
.prompt-actions { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.copy-status { font-size: 13px; color: var(--muted); }

/* Tips */
.tips-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 18px; }
.tip-column { padding: 18px; border-radius: var(--radius); border: 1px solid var(--stroke); background: color-mix(in srgb, var(--panel) 92%, transparent); box-shadow: var(--shadow); }
.tip-column ul { padding-left: 18px; margin: 0; display: grid; gap: 10px; }
.tip-column li { color: var(--muted); line-height: 1.6; }
.tip-column strong { color: var(--text); }

/* Video */
.video-frame { position: relative; padding-top: 40%; width: min(1000px, 100%); margin: 0 auto; border-radius: 18px; overflow: hidden; box-shadow: var(--shadow); border: 1px solid var(--stroke); background: color-mix(in srgb, var(--panel) 92%, transparent); }
.video-frame iframe,
.video-frame video { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; object-fit: cover; }

/* Melatonin */
.melatonin-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 14px; margin-top: 10px; }
.mel-card { padding: 16px; border-radius: var(--radius); border: 1px solid var(--stroke); background: color-mix(in srgb, var(--panel) 90%, transparent); box-shadow: var(--shadow); }
.mel-card h3 { font-size: 17px; }

/* Figures */
.figures-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 14px; }
.figure-card { padding: 16px; border-radius: var(--radius); border: 1px solid var(--stroke); background: color-mix(in srgb, var(--panel) 92%, transparent); box-shadow: var(--shadow); }
.figure-source { display: inline-block; margin-top: 6px; font-size: 12px; color: var(--muted); }

/* Focus hover effect for card grids */
.why-card,
.card,
.advice-card,
.tip-column,
.mel-card,
.figure-card {
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  transform-origin: center;
}

.why-card:hover,
.card:hover,
.advice-card:hover,
.tip-column:hover,
.mel-card:hover,
.figure-card:hover,
.why-card:focus-visible,
.card:focus-visible,
.advice-card:focus-visible,
.tip-column:focus-visible,
.mel-card:focus-visible,
.figure-card:focus-visible {
  transform: scale(1.25);
  box-shadow: 0 22px 60px rgba(0, 0, 0, 0.4), 0 0 25px color-mix(in srgb, var(--accent) 40%, transparent), inset 0 0 25px color-mix(in srgb, var(--accent-2) 30%, transparent);
  z-index: 2;
  outline: none;
}

/* Works */
.works-list { padding-left: 18px; margin: 0; display: grid; gap: 10px; }
.works-list li { color: var(--muted); line-height: 1.6; }
.url { color: var(--text); }

/* Artist */
.placeholder-box { padding: 18px; border-radius: var(--radius); border: 1px dashed var(--stroke); color: var(--muted); background: color-mix(in srgb, var(--panel) 95%, transparent); }

/* Closing */
.closing .hero-actions { margin-top: 14px; justify-content: flex-start; }

/* Reveal */
.reveal { opacity: 0; transform: translateY(30px); transition: opacity 0.7s ease, transform 0.7s ease; }
.reveal.visible { opacity: 1; transform: translateY(0); }

/* Keyframes */
@keyframes twinkle { 0%, 100% { opacity: 0.25; transform: scale(0.9); } 50% { opacity: 1; transform: scale(1.5); } }
@keyframes pulse { 0%, 100% { height: 6px; } 50% { height: 18px; } }
@keyframes starsIn { 0% { opacity: 0; } 100% { opacity: 1; } }
@keyframes flow { 0% { background-position: 0% 50%; } 100% { background-position: 200% 50%; } }
@keyframes drop { 0% { transform: translate(-50%, 0); opacity: 1; } 100% { transform: translate(-50%, 10px); opacity: 0; } }
@keyframes flip {
  0% { transform: rotateX(0deg); opacity: 1; }
  50% { transform: rotateX(90deg); opacity: 0; }
  100% { transform: rotateX(0deg); opacity: 1; }
}
@keyframes aurora { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto; }
  body, body.night { animation: none !important; }
}

/* Responsive */
@media (max-width: 900px) {
  .hero { padding: 120px 8vw 100px; }
  .section { min-height: auto; padding: 100px 0; }
  .photo-content { padding: 16vh 8vw; }
}
@media (max-width: 640px) {
  .hero { padding-top: 140px; }
  .hero h1 { font-size: clamp(72px, 18vw, 120px); }
  .hero-actions { flex-direction: column; align-items: center; }
  .audio-controls { width: 100%; justify-content: space-between; }
}
